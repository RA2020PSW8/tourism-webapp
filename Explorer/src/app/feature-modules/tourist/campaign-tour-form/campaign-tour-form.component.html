<div class="main">
    <div class="form-container" *ngIf="!complete">
        <form [formGroup]="tourForm" style="display: flex; flex-direction: column;">
                <mat-form-field>
                    <mat-label>Name</mat-label>
                    <input matInput formControlName="name" type="text"/>
                </mat-form-field>
        
                <mat-form-field>
                <mat-label>Description</mat-label>
                <textarea matInput
                cdkTextareaAutosize
                cdkAutosizeMinRows="2"
                formControlName="description"
                cdkAutosizeMaxRows="5"></textarea>
                </mat-form-field>
        
                <mat-form-field>
                    <mat-label>Transport type</mat-label>
                    <mat-select formControlName="transportType" matInput required>
                        <mat-option value="WALK">Walk</mat-option>
                        <mat-option value="BIKE">Bike</mat-option>
                        <mat-option value="CAR">Car</mat-option>
                        <mat-option value="BOAT">Boat</mat-option>
                    </mat-select>
                </mat-form-field>
        
                <button color="primary" type="submit" (click)="saveTour()" mat-raised-button [disabled]="!tourForm.valid">
                    <span>Save</span>
                </button>
        </form>
    </div>

    <div class="tables-container" *ngIf="!complete">
        <h1>Avaliable tours</h1>
        <div class="table-container">
            <table>
                <tr>
                    <td>Name</td>
                    <td>Duration</td>
                    <td>Difficulty</td>
                </tr>
                <tr *ngFor="let tour of boughtTours">
                    <td>{{tour.name}}</td>
                    <td>{{tour.duration}}</td>
                    <td>{{tour.difficulty}}</td>
                    <td>
                        <button color="accent" mat-button (click)="addTour(tour)">
                            <mat-icon>add</mat-icon>
                            Add
                        </button>
                    </td>
                </tr>
            </table>
        </div>
        <h1 style="padding-left: 2%;">Selected tours</h1>
        <div class="table-container">
            <table>
                <tr>
                    <td>Name</td>
                    <td>Duration</td>
                    <td>Difficulty</td>
                </tr>
                <tbody>
                    <tr *ngFor="let tour of selectedTours">
                        <td>{{tour.name}}</td>
                        <td>{{tour.duration}}</td>
                        <td>{{tour.difficulty}}</td>
                        <td>
                            <button color="accent" mat-button (click)="removeTour(tour)">
                                <mat-icon>remove</mat-icon>
                                Remove
                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <button *ngIf="!complete" color="accent" mat-flat-button (click)="saveTour()" style="width: 80%; align-self: center; margin-top: 3%;">
        Create
    </button>
    <div class="cont" *ngIf="complete">
            <h1>Tour information</h1>
            <p><strong>Name:</strong> {{newTour.name}}</p>
            <p><strong>Description:</strong> {{newTour.description}}</p>
            
            <p *ngIf="newTour.distance"><strong>Travel distance:</strong> {{newTour.distance | number:'1.2-2'}} km</p>
            <p *ngIf="newTour.duration"><strong>Tour duration:</strong> {{newTour.duration | time}}</p>
            <p *ngIf="newTour.difficulty"><strong>Tour difficulty</strong> {{newTour.difficulty}}</p>

            <table>
                <tbody>
                    <tr *ngFor="let e of equipment">
                        <td>{{e.name}}</td>
                        <td>{{e.description}}</td>
                    </tr>
                </tbody>
            </table>
    </div>
    <div class="map-container" *ngIf="complete">
        <app-map [enableClicks]="false" [toggleOff]="false" [routeQuery]="routeQuery" (routesFoundEvent)="getRouteInfo($event)"></app-map>
    </div>
</div>